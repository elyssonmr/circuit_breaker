<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <title>Circuit Breaker</title>

        <meta name="author" content="√âlysson MR">

        <link rel="stylesheet" href="dist/reset.css">
        <link rel="stylesheet" href="dist/reveal.css">
        <link rel="stylesheet" href="dist/theme/black.css">

        <!-- Theme used for syntax highlighted code -->
        <link rel="stylesheet" href="plugin/highlight/monokai.css">
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section>
                    <h1>
                        Estrat√©gias de Resili√™ncia - Circuit Breaker
                    </h1>
                    <p>√âlysson MR - Squad Pagamentos Ecomm</p>
                </section>
                <section>
                    <h1>T√≥picos</h1>
                    <ul>
                        <li class="fragment">Introdu√ß√£o</li>
                        <li class="fragment">O que √© uma aplica√ß√£o resiliente?</li>
                        <li class="fragment">O design Pattern Circuit Breaker</li>
                        <li class="fragment">Exemplo pr√°tico</li>
                        <li class="fragment">Conclus√£o</li>
                    </ul>
                </section>
                <section>
                    <h2>Introdu√ß√£o</h2>
                    <ul>
                        <li class="fragment">Micro-servi√ßos se conectam uns aos outros utilizando a rede</li>
                        <li class="fragment">O que faremos caso um dos n√≥s falhe? Vamos deixar todas as aplica√ß√µes falhem juntas?</li>
                        <li class="fragment">Como podemos tolerar erros na comunica√ß√£o com outros servi√ßos?</li>
                        <li class="fragment">Existem diversas estrat√©gias para manter as aplica√ß√µes funcionando</li>
                    </ul>
                </section>
                <section>
                    <section>
                        <h2>O que √© uma aplica√ß√£o resiliente?</h2>
                        <ul>
                            <li class="fragment">√â uma aplica√ß√£o que saiba lidar com as falhas se recuperando delas para continuar o funcionamento</li>
                            <li class="fragment">
                                <span>Uma aplica√ß√£o pode se recuperar de 2 formas:</span>
                                <ul>
                                    <li class="fragment">
                                        <b>Totalmente</b> -> ela mant√©m todos os servi√ßos em funcionamento sem o usu√°rio perceber que houve uma falha
                                    </li>
                                    <li class="fragment">
                                        <b>Com Degrada√ß√£o</b> -> alguns servi√ßos s√£o oferecidos de forma limitada (graceful degradation)
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                    <section>
                        <h2>O que √© uma aplica√ß√£o resiliente?</h2>
                        <ul>
                            <li class="fragment">
                                <span>Existem 3 tipos de falhas:</span>
                                <ul>
                                    <li class="fragment">
                                        <b>Transientes</b> -> Ocorrem uma vez e demora para ocorrer de novo. Ex: Falta de internet
                                    </li>
                                    <li class="fragment">
                                        <b>Intermitentes</b> -> Falhas transientes e ocorrem repetidamente. Ex: Timeouts de requests devido a rede lenta
                                    </li>
                                    <li class="fragment">
                                        <b>Permanentes</b> -> Quando ocorrem permanecem at√© que alguma a√ß√£o seja tomada. Ex: O servidor de aplica√ß√£o cair
                                    </li>
                                <ul>
                            </li>
                        </ul>
                    </section>
                </section>
                <section>
                    <section>
                        <h2>O design pattern Circuit Breaker</h2>
                        <ul>
                            <li class="fragment">
                                Bem parecido com o conceito de instala√ß√µes el√©tricas
                            </li>
                            <li class="fragment">
                                Quando determinada situa√ß√£o ocorre o Circuit Breaker abre protegendo o restante dos micro-servi√ßos (circuito)
                            </li>
                            <li class="fragment">
                                Essa estrat√©gia √© utilizada para poder n√£o degradar o nosso sistema
                            </li>
                            <li class="fragment">
                                Com a abertura do CB podemos tomar uma a√ß√£o diferente ou retornar um erro direto
                            </li>
                        </ul>
                    </section>
                    <section>
                        <h2>O design pattern Circuit Breaker</h2>
                        <ul>
                            <li class="fragment">
                                N√≥s devemos envolver a chamada de um recurso caro com a implementa√ß√£o do Circuit Breaker
                            </li>
                            <li class="fragment">
                                Esse objeto ir√° monitorar os erros (pode ser mais de um tipo) para abrir o CB
                            </li>
                            <li class="fragment">
                                Pode-se configurar um tempo para podermos ‚Äúarmar‚Äù novamente o Circuit Breaker automaticamente
                            </li>
                        </ul>
                    </section>
                    <section>
                        <h2>O design pattern Circuit Breaker</h2>
                        <p>Exemplo1: Usamos um servi√ßo de envio de emails para nossos clientes, por√©m ele esta retornando muitos timeouts.</p>
                        <img src="img/exemplo1.png" width="700" height="300"/>
                    </section>
                    <section>
                        <h2>O design pattern Circuit Breaker</h2>
                        <p>Exemplo2: Precisamos processar os pagamentos das assinaturas, mas o servi√ßo principal (mais barato) est√° com problemas . Para n√£o ficar muito tempo sem vender ($$$), vamos utilizar outro servi√ßo (mais caro) como backup por um tempo ($$).</p>
                    </section>
                    <section>
                        <h2>O design pattern Circuit Breaker</h2>
                        <span>Fluxo Normal</span>
                        <img src="img/exemplo21.png" width="900" height="400"/>
                    </section>
                    <section>
                        <h2>O design pattern Circuit Breaker</h2>
                        <span>Fluxo Backup Ativo</span>
                        <img src="img/exemplo22.png" width="900" height="400"/>
                    </section>
                </section>
                <section>
                    <h2>Exemplo Pr√°tico</h2>
                    <ul>
                        <li class="fragment">
                            Dois apps em flask simples, para demostrar como a t√©cnica funciona.
                        </li>
                        <li class="fragment">
                            Vamos executar um teste de carga com o Locust para podemos simular o CB abrindo.
                        </li>
                        <li class="fragment">
                            Que nossa senhora do live code nos aben√ßoe! üôè
                        </li>
                    </ul>
                </section>
                <section>
                    <h2>Conclus√£o</h2>
                    <ul>
                        <li class="fragment">
                            Utilizando o Circuit Breaker podemos n√£o onerar muito o nosso(s) sistema(s)
                        </li>
                        <li class="fragment">
                            Utilizar somente o CB para evitar erros pode n√£o ser algo interessante para o neg√≥cio
                        </li>
                        <li class="fragment">
                            O padr√£o √© simples e bem eficiente permitindo a utiliza√ß√£o em diversas partes do sistema
                        </li>
                    </ul>
                </section>
                <section>
                    <h2>Para saber mais:</h2>
                    <ul>
                        <li><a href="https://martinfowler.com/bliki/CircuitBreaker.html">https://martinfowler.com/bliki/CircuitBreaker.html</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/Circuit_breaker_design_pattern">https://en.wikipedia.org/wiki/Circuit_breaker_design_pattern</a></li>
                        <li><a href="https://imasters.com.br/desenvolvimento/criando-aplicacoes-resilientes-uma-visao-geral">https://imasters.com.br/desenvolvimento/criando-aplicacoes-resilientes-uma-visao-geral</a></li>
                        <li><a href="https://www.infoq.com/br/presentations/construindo-aplicacoes-resilientes/">https://www.infoq.com/br/presentations/construindo-aplicacoes-resilientes/</a></li>
                        <li><a href="https://pypi.org/project/pybreaker/">https://pypi.org/project/pybreaker/</a></li>
                        <li><a href="https://pypi.org/project/lasier/">https://pypi.org/project/lasier/</a></li>
                    </ul>
                </section>
                <section>
                    <h1>Obrigado!!</h1>
                    <p><b>Slack</b>: @elysson.rezende</p>
                </section>
            </div>
        </div>

        <script src="dist/reveal.js"></script>
        <script src="plugin/notes/notes.js"></script>
        <script src="plugin/markdown/markdown.js"></script>
        <script src="plugin/highlight/highlight.js"></script>
        <script>
            // More info about initialization & config:
            // - https://revealjs.com/initialization/
            // - https://revealjs.com/config/
            Reveal.initialize({
                hash: true,

                // Learn about plugins: https://revealjs.com/plugins/
                plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
            });
        </script>
    </body>
</html>
